<!-- A lightweight "Amazon-like" single-file React page (no build tools required).
     Open this file in your browser. -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-Amazon - React Demo</title>

  <style>
    :root{--primary:#232f3e;--accent:#ff9900;--muted:#666}
    *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
    body{margin:0;background:#f4f4f4;color:#111}
    .site-header{background:var(--primary);color:#fff;padding:12px 18px;display:flex;align-items:center;gap:16px}
    .logo{font-weight:700;letter-spacing:1px;font-size:20px}
    .search{flex:1;display:flex;max-width:700px}
    .search input{flex:1;padding:8px 10px;border-radius:4px 0 0 4px;border:none}
    .search button{padding:8px 14px;border:none;background:var(--accent);color:#111;border-radius:0 4px 4px 0;cursor:pointer}
    .header-right{display:flex;gap:14px;align-items:center;font-size:14px}
    .cart{background:#fff;color:var(--primary);padding:6px 10px;border-radius:18px;font-weight:700}
    .container{max-width:1100px;margin:18px auto;padding:0 12px}
    .layout{display:grid;grid-template-columns:220px 1fr;gap:18px}
    .sidebar{background:#fff;padding:12px;border-radius:6px}
    .category{padding:8px 6px;border-radius:4px;cursor:pointer;color:var(--primary);margin-bottom:6px}
    .category:hover{background:#f0f0f0}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
    .card{background:#fff;border-radius:6px;padding:10px;display:flex;flex-direction:column;gap:8px;align-items:center}
    .card img{width:140px;height:140px;object-fit:contain}
    .price{color:var(--primary);font-weight:700}
    .add{background:var(--accent);border:none;color:#111;padding:8px 10px;border-radius:6px;cursor:pointer}
    .filters{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .footer{margin-top:22px;padding:14px 0;text-align:center;color:var(--muted)}
    @media (max-width:720px){ .layout{grid-template-columns:1fr} .sidebar{order:2} .container{padding:0 10px} .logo{font-size:16px} .search{max-width:none} }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="logo">mini-amazon</div>

    <div class="search" id="search-root">
      <!-- React will render the search here -->
    </div>

    <div class="header-right" id="header-right">
      <!-- React renders cart/count and links -->
    </div>
  </header>

  <main class="container">
    <div id="app-root"></div>
  </main>

  <footer class="footer">
    Built with React (UMD) — demo page — not affiliated with Amazon
  </footer>

  <!-- React (UMD) and Babel for JSX in-browser (development only) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo } = React;

    const sampleProducts = [
      { id:1, title: "Wireless Headphones", price: 49.99, img: "https://via.placeholder.com/200x150?text=Headphones", category: "Electronics" },
      { id:2, title: "Smartphone", price: 199.99, img: "https://via.placeholder.com/200x150?text=Phone", category: "Electronics" },
      { id:3, title: "Running Shoes", price: 79.99, img: "https://via.placeholder.com/200x150?text=Shoes", category: "Fashion" },
      { id:4, title: "Coffee Maker", price: 29.99, img: "https://via.placeholder.com/200x150?text=Coffee+Maker", category: "Home" },
      { id:5, title: "Desk Lamp", price: 19.99, img: "https://via.placeholder.com/200x150?text=Lamp", category: "Home" },
      { id:6, title: "Backpack", price: 39.99, img: "https://via.placeholder.com/200x150?text=Backpack", category: "Fashion" },
      { id:7, title: "Gaming Mouse", price: 24.99, img: "https://via.placeholder.com/200x150?text=Mouse", category: "Electronics" },
      { id:8, title: "Water Bottle", price: 9.99, img: "https://via.placeholder.com/200x150?text=Bottle", category: "Outdoors" },
    ];

    function Header({ query, setQuery, cartCount }) {
      return (
        <>
          <div style={{display:'flex',flex:1}}>
            <input
              aria-label="search"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              placeholder="Search products, brands and more"
              style={{flex:1,padding:8,borderRadius:4,border:'none'}}
            />
            <button onClick={() => {}} style={{marginLeft:8,padding:'8px 12px',background:'#ff9900',border:'none',borderRadius:4,cursor:'pointer'}}>Search</button>
          </div>
          <div style={{display:'flex',alignItems:'center',gap:12}}>
            <div style={{textAlign:'right',fontSize:12}}>
              <div style={{fontWeight:700}}>Hello, Guest</div>
              <div style={{color:'#ddd'}}>Account & Lists</div>
            </div>
            <div className="cart">Cart: {cartCount}</div>
          </div>
        </>
      );
    }

    function Sidebar({ categories, selected, onSelect }) {
      return (
        <aside className="sidebar">
          <h4 style={{marginTop:0}}>Categories</h4>
          {categories.map(c => (
            <div
              key={c}
              className="category"
              style={{fontWeight: c===selected?700:400, background: c===selected? '#eef': 'transparent'}}
              onClick={() => onSelect(c)}>
              {c}
            </div>
          ))}
        </aside>
      );
    }

    function ProductCard({ p, onAdd }) {
      return (
        <div className="card">
          <img src={p.img} alt={p.title} />
          <div style={{textAlign:'center'}}>{p.title}</div>
          <div className="price">${p.price.toFixed(2)}</div>
          <button className="add" onClick={() => onAdd(p)}>Add to cart</button>
        </div>
      );
    }

    function ProductList({ products, onAdd }) {
      if (!products.length) return <div style={{padding:20,background:'#fff',borderRadius:6}}>No products found.</div>;
      return (
        <div className="products">
          {products.map(p => <ProductCard key={p.id} p={p} onAdd={onAdd} />)}
        </div>
      );
    }

    function App() {
      const [query, setQuery] = useState('');
      const [selectedCategory, setSelectedCategory] = useState('All');
      const [cart, setCart] = useState([]);

      const categories = useMemo(() => ['All', ...Array.from(new Set(sampleProducts.map(s=>s.category)))], []);

      const filtered = useMemo(() => {
        const q = query.trim().toLowerCase();
        return sampleProducts.filter(p => {
          const matchQ = !q || p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q);
          const matchC = selectedCategory === 'All' || p.category === selectedCategory;
          return matchQ && matchC;
        });
      }, [query, selectedCategory]);

      const handleAdd = (product) => {
        setCart(prev => [...prev, product]);
      };

      return (
        <div className="layout">
          <Sidebar categories={categories} selected={selectedCategory} onSelect={setSelectedCategory} />
          <section>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:8}}>
              <div className="filters">
                <strong>{selectedCategory}</strong>
                <span style={{color:'#777'}}>•</span>
                <div style={{color:'#777'}}>{filtered.length} results</div>
              </div>
            </div>

            <ProductList products={filtered} onAdd={handleAdd} />
          </section>
        </div>
      );
    }

    // Mount header search area and header-right separately to achieve the top layout
    function Root() {
      const [query, setQuery] = useState('');
      const [cartCount, setCartCount] = useState(0);

      // Lift add to cart action via custom event between components
      React.useEffect(() => {
        const listener = (e) => setCartCount(e.detail.count);
        window.addEventListener('cart-update', listener);
        return () => window.removeEventListener('cart-update', listener);
      }, []);

      return (
        <>
          <div style={{display:'flex',alignItems:'center',gap:8,width:'100%'}}>
            <input value={query} onChange={e=>setQuery(e.target.value)} placeholder="Search products, brands and more" style={{flex:1,padding:8,borderRadius:4,border:'none'}} />
            <button style={{marginLeft:8,padding:'8px 12px',background:'#ff9900',border:'none',borderRadius:4,cursor:'pointer'}}>Search</button>
          </div>
        </>
      );
    }

    // Render the main app and also keep a lightweight header control for search & cart display.
    const appRoot = document.getElementById('app-root');
    ReactDOM.createRoot(appRoot).render(
      <React.StrictMode>
        <App />
      </React.StrictMode>
    );

    // Simple global cart publisher so header cart count can be updated without complex state plumbing
    (function setupCartBridge(){
      let count = 0;
      const originalAdd = window.addToCart;
      window.addToCart = function(p){
        count++;
        window.dispatchEvent(new CustomEvent('cart-update',{detail:{count}}));
        return originalAdd && originalAdd(p);
      };
      // Provide a global add function used by ProductCard: we wire it here
    })();

    // To wire the add buttons to update header count, override ProductCard onAdd to dispatch event:
    // For simpler approach below, monkey-patch ReactDOM to propagate cart events:
    // Instead, we'll update cart via DOM event from each Add button.
    // Modify ProductCard add handler to dispatch a global event:
    // (We'll re-render App to bind that behavior.)
    function AppWithCartBridge() {
      const [query, setQuery] = useState('');
      const [selectedCategory, setSelectedCategory] = useState('All');
      const categories = useMemo(() => ['All', ...Array.from(new Set(sampleProducts.map(s=>s.category)))], []);
      const filtered = useMemo(() => {
        const q = query.trim().toLowerCase();
        return sampleProducts.filter(p => {
          const matchQ = !q || p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q);
          const matchC = selectedCategory === 'All' || p.category === selectedCategory;
          return matchQ && matchC;
        });
      }, [query, selectedCategory]);

      const handleAdd = (product) => {
        // Dispatch global event so header cart updates
        const ev = new CustomEvent('cart-update-request', { detail: { product }});
        window.dispatchEvent(ev);
      };

      React.useEffect(() => {
        const onReq = (e) => {
          const current = (window.__MINI_CART_COUNT||0) + 1;
          window.__MINI_CART_COUNT = current;
          window.dispatchEvent(new CustomEvent('cart-update',{detail:{count:current}}));
        };
        window.addEventListener('cart-update-request', onReq);
        return () => window.removeEventListener('cart-update-request', onReq);
      }, []);

      return (
        <div className="layout">
          <Sidebar categories={categories} selected={selectedCategory} onSelect={setSelectedCategory} />
          <section>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:8}}>
              <div className="filters">
                <strong>{selectedCategory}</strong>
                <span style={{color:'#777'}}>•</span>
                <div style={{color:'#777'}}>{filtered.length} results</div>
              </div>
            </div>

            <div className="products">
              {filtered.map(p => (
                <div className="card" key={p.id}>
                  <img src={p.img} alt={p.title} />
                  <div style={{textAlign:'center'}}>{p.title}</div>
                  <div className="price">${p.price.toFixed(2)}</div>
                  <button className="add" onClick={() => handleAdd(p)}>Add to cart</button>
                </div>
              ))}
            </div>
          </section>
        </div>
      );
    }

    // Render header cart indicator
    const headerRightRoot = document.getElementById('header-right');
    function HeaderRight() {
      const [count, setCount] = useState(0);
      React.useEffect(() => {
        const onUpdate = (e) => setCount(e.detail.count || 0);
        window.addEventListener('cart-update', onUpdate);
        return () => window.removeEventListener('cart-update', onUpdate);
      }, []);
      return (
        <div style={{display:'flex',gap:12,alignItems:'center'}}>
          <div style={{textAlign:'right',fontSize:12}}>
            <div style={{fontWeight:700}}>Hello, Guest</div>
            <div style={{color:'#ddd'}}>Account & Lists</div>
          </div>
          <div className="cart">Cart: {count}</div>
        </div>
      );
    }
    ReactDOM.createRoot(headerRightRoot).render(<HeaderRight/>);

    // Render search box into the search area (top)
    const searchRoot = document.getElementById('search-root');
    function TopSearch() {
      const [q, setQ] = useState('');
      return (
        <div style={{display:'flex',alignItems:'center',gap:8,width:'100%'}}>
          <input value={q} onChange={e=>setQ(e.target.value)} placeholder="Search products, brands and more" style={{flex:1,padding:8,borderRadius:4,border:'none'}} />
          <button onClick={()=>{/* no-op search in header */}} style={{padding:'8px 12px',background:'#ff9900',border:'none',borderRadius:4,cursor:'pointer'}}>Search</button>
        </div>
      );
    }
    ReactDOM.createRoot(searchRoot).render(<TopSearch/>);

    // Finally mount the bridged app (so add-to-cart dispatch works)
    ReactDOM.createRoot(appRoot).render(<AppWithCartBridge />);
  </script>
</body>
</html>